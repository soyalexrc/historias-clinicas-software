generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model Patient {
  id         String      @id @default(cuid())
  sequence   Int         @default(autoincrement())
  firstName  String
  lastName   String
  dni        String
  age        Int
  sex        String
  createdAt  DateTime    @default(now())
  attentions Attention[]
}

model Attention {
  id        String  @id @default(cuid())
  sequence  Int     @default(autoincrement())
  patientId String
  patient   Patient @relation(fields: [patientId], references: [id])
  ticket    Ticket  @relation(fields: [ticketId], references: [id])
  ticketId  Int     @unique
}

model Ticket {
  id                             Int        @id @default(autoincrement())
  attention                      Attention?
  cidDetail                      String
  cidItem                        String
  ccodProdServItem               String
  cdescriptItem                  String
  cindicadoPsItem                String
  cvalorVentaUnitaria            String
  cprecioVentaUnitarioItem       String
  ccantidadItem                  String
  cValorItem                     String
  cigvTotalItem                  String
  ctotalItem                     String
  ccodSunatProdServItem          String
  ccodComercialProdServ          String
  cid                            String
  cfecEd                         String
  ctipDocEmisor                  String
  capaminoRazonSocialEmisor      String
  cubigeoEmisor                  String
  cdireccionEmisor               String
  cdepartamentoEmisor            String
  cprovinciaEmisor               String
  cdistritoEmisor                String
  cnombreComercialEmisor         String
  cTipDoc                        String
  cnroSerie                      String
  cnroDoc                        String
  cinfoDocAdquiriente            String
  ctipDocAdquiriente             String
  capaminoRazonSocialAdquiriente String
  cmoneda                        String
  ctotalOperacionesGrav          String
  cmontoTotalIgv                 String
  cmontoTotalPagar               String
  cmontoTotalPercep              String
  cleyenda                       String
  cfecCreaFace                   String
  ccodigoBarras                  String
  ccodigpQr                      String
  isValidated                    Boolean?
  validatesDate                  DateTime?  @default(now())
  valitadedBy                    String?
}

model TestTicket {
  id         Int    @id @default(autoincrement())
  jsonString String
}

model TicketInfo {
  id                                 Int      @id @default(autoincrement())
  C_ID                               Int
  C_FEC_ED                           DateTime
  C_TIP_DOC_EMISOR                   String?
  C_APAMNO_RAZON_SOCIAL_EMISOR       String
  C_UBIGEO_EMISOR                    String?
  C_DIRECCION_EMISOR                 String?
  C_DEPARTAMENTO_EMISOR              String?
  C_PROVINCIA_EMISOR                 String?
  C_DISTRITO_EMISOR                  String?
  C_NOMBRE_COMERCIAL_EMISOR          String?
  C_TIP_DOC                          String?
  C_NRO_SERIE                        String
  C_NRO_DOC                          String
  C_NRO_DOC_ADQUIRIENTE              String?
  C_TIP_DOC_ADQUIRIENTE              String?
  C_APAMINO_RAZON_SOCIAL_ADQUIRIENTE String?
  C_MONEDA                           String
  C_RUCE                             String
  C_MONTO_TOTAL_IGV                  Int
  C_TOTAL_OPERACIONES_GRAV           Int
  C_MONTO_PAGAR                      Int
  C_MONTO_TOTAL_PERCEP               Int?
  C_LEYENDA                          String?
  C_FEC_CREA_FACE                    DateTime
}

model TicketInfoDetail {
  id                         Int    @id @default(autoincrement())
  C_ID                       Int
  C_ID_ITEM                  String
  C_DESCRIP_ITEM             String
  C_VALOR_VENTA_UNITARIA     Int
  C_CANTIDAD_ITEM            Int
  C_IGV_TOTAL_ITEM           Int
  C_COD_SUNAT_PROD_SERV_ITEM String
}
